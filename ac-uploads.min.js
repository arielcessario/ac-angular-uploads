(function(){var a=document.getElementsByTagName("script");var e=a[a.length-1].src;if(e.length==0){e=window.installPath+"/ac-angular-proyectos/includes/ac-uploads.php"}else{e=e.replace("ac-uploads.js","includes/ac-uploads.php")}angular.module("acUploads",[]).directive("acUploadFiles",d).factory("UploadService",b).service("UploadVars",c);b.$inject=["UploadVars","$http"];function b(i,j){var h={};h.uploadImages=g;h.addImages=f;return h;function f(o,k,s,m,r){for(var n=0;n<o.length;++n){var l=o.item(n);g(l,s,m,r);var q=-1;for(var p=0;p<i.uploadsList.length;p++){if(i.uploadsList[p].id==k){q=p}}if(q>-1){i.uploadsList[q].file=l}else{i.uploadsList.push({id:k,file:l})}}}function g(l,n,k,m){j.post(e,{"function":"setCompression",value:k}).success(function(p){var q=new FormData();if(l.size>800000){alert("No se puede subir un archivo que sea mayor a 400k");return}q.append("compress",k);q.append("images",l);q.append("folder",n);var o=new XMLHttpRequest();o.onprogress=function(){};o.onload=function(r){m(r)};o.onerror=function(r){m(r)};o.open("POST",e,true);o.send(q)}).error(function(o){console.log(o)})}}function d(){return{restrict:"A",scope:{acUploadFiles:"&"},link:function(h,g,f,i){g.bind("change",function(){h.acUploadFiles({selectedFileList:g[0].files})})}}}function c(){this.uploadsList=[]}})();